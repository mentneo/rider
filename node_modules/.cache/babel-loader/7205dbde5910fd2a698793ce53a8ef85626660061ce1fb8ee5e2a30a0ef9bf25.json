{"ast":null,"code":"var _jsxFileName = \"/Users/yeduruabhiram/Desktop/chiru babai/src/pages/customer/BookingPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { doc, getDoc, collection, query, where, getDocs, addDoc } from 'firebase/firestore';\nimport { db } from '../../firebase/config';\nimport { useAuth } from '../../context/AuthContext';\nimport { toast } from 'react-toastify';\nimport LoadingSpinner from '../../components/common/LoadingSpinner';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst BookingPage = () => {\n  _s();\n  const {\n    carId\n  } = useParams();\n  const {\n    currentUser\n  } = useAuth();\n  const navigate = useNavigate();\n  const mapRef = useRef(null);\n  const [mapLoaded, setMapLoaded] = useState(false);\n  const [map, setMap] = useState(null);\n  const [pickupMarker, setPickupMarker] = useState(null);\n  const [dropMarker, setDropMarker] = useState(null);\n  const [car, setCar] = useState(null);\n  const [availableDrivers, setAvailableDrivers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [bookingType, setBookingType] = useState('withDriver'); // 'withDriver' or 'selfDrive'\n  const [formData, setFormData] = useState({\n    pickupLocation: '',\n    dropLocation: '',\n    pickupDate: '',\n    pickupTime: '',\n    returnDate: '',\n    returnTime: '',\n    estimatedDistance: '',\n    driverId: '',\n    specialRequests: '',\n    customerPhone: ''\n  });\n  const [bookingSummary, setBookingSummary] = useState({\n    totalAmount: 0,\n    driverCharge: 0,\n    distanceCharge: 0\n  });\n  const [locationMode, setLocationMode] = useState('pickup'); // 'pickup' or 'drop'\n\n  useEffect(() => {\n    if (carId) {\n      fetchCarDetails();\n      fetchAvailableDrivers();\n    }\n\n    // Load Google Maps API script\n    const googleMapsScript = document.createElement('script');\n    googleMapsScript.src = `https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&libraries=places`;\n    googleMapsScript.async = true;\n    googleMapsScript.defer = true;\n    googleMapsScript.onload = initializeMap;\n    document.head.appendChild(googleMapsScript);\n    return () => {\n      // Clean up the script tag when component unmounts\n      const script = document.querySelector(`script[src*=\"maps.googleapis.com/maps/api\"]`);\n      if (script) {\n        script.remove();\n      }\n    };\n  }, [carId]);\n  useEffect(() => {\n    // Prefill customer phone if available in user profile\n    if (currentUser && currentUser.phoneNumber) {\n      setFormData(prev => ({\n        ...prev,\n        customerPhone: currentUser.phoneNumber\n      }));\n    }\n  }, [currentUser]);\n  useEffect(() => {\n    // Calculate booking cost whenever relevant form data changes\n    calculateBookingCost();\n  }, [formData.estimatedDistance, car, bookingType, formData.driverId]);\n  const initializeMap = () => {\n    if (!mapRef.current) return;\n    const defaultLocation = {\n      lat: 37.7749,\n      lng: -122.4194\n    }; // San Francisco as default\n\n    const mapInstance = new window.google.maps.Map(mapRef.current, {\n      center: defaultLocation,\n      zoom: 13,\n      mapTypeControl: false,\n      streetViewControl: false,\n      fullscreenControl: false\n    });\n\n    // Initialize autocomplete for pickup location\n    const pickupInput = document.getElementById('pickupLocation');\n    const pickupAutocomplete = new window.google.maps.places.Autocomplete(pickupInput);\n    pickupAutocomplete.addListener('place_changed', () => {\n      const place = pickupAutocomplete.getPlace();\n      if (!place.geometry) return;\n\n      // Update form with selected location\n      setFormData(prev => ({\n        ...prev,\n        pickupLocation: place.formatted_address\n      }));\n\n      // Set marker\n      if (pickupMarker) pickupMarker.setMap(null);\n      const marker = new window.google.maps.Marker({\n        map: mapInstance,\n        position: place.geometry.location,\n        icon: {\n          url: 'http://maps.google.com/mapfiles/ms/icons/green-dot.png'\n        },\n        title: 'Pickup Location'\n      });\n      setPickupMarker(marker);\n\n      // Center map\n      mapInstance.setCenter(place.geometry.location);\n      updateEstimatedDistance();\n    });\n\n    // Initialize autocomplete for drop location\n    const dropInput = document.getElementById('dropLocation');\n    const dropAutocomplete = new window.google.maps.places.Autocomplete(dropInput);\n    dropAutocomplete.addListener('place_changed', () => {\n      const place = dropAutocomplete.getPlace();\n      if (!place.geometry) return;\n\n      // Update form with selected location\n      setFormData(prev => ({\n        ...prev,\n        dropLocation: place.formatted_address\n      }));\n\n      // Set marker\n      if (dropMarker) dropMarker.setMap(null);\n      const marker = new window.google.maps.Marker({\n        map: mapInstance,\n        position: place.geometry.location,\n        icon: {\n          url: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png'\n        },\n        title: 'Drop Location'\n      });\n      setDropMarker(marker);\n\n      // Center map\n      mapInstance.setCenter(place.geometry.location);\n      updateEstimatedDistance();\n    });\n\n    // Allow clicking on map to set locations\n    mapInstance.addListener('click', event => {\n      const geocoder = new window.google.maps.Geocoder();\n      geocoder.geocode({\n        'location': event.latLng\n      }, (results, status) => {\n        if (status === 'OK' && results[0]) {\n          const address = results[0].formatted_address;\n          if (locationMode === 'pickup') {\n            // Update pickup location\n            setFormData(prev => ({\n              ...prev,\n              pickupLocation: address\n            }));\n\n            // Set marker\n            if (pickupMarker) pickupMarker.setMap(null);\n            const marker = new window.google.maps.Marker({\n              map: mapInstance,\n              position: event.latLng,\n              icon: {\n                url: 'http://maps.google.com/mapfiles/ms/icons/green-dot.png'\n              },\n              title: 'Pickup Location'\n            });\n            setPickupMarker(marker);\n          } else {\n            // Update drop location\n            setFormData(prev => ({\n              ...prev,\n              dropLocation: address\n            }));\n\n            // Set marker\n            if (dropMarker) dropMarker.setMap(null);\n            const marker = new window.google.maps.Marker({\n              map: mapInstance,\n              position: event.latLng,\n              icon: {\n                url: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png'\n              },\n              title: 'Drop Location'\n            });\n            setDropMarker(marker);\n          }\n          updateEstimatedDistance();\n        }\n      });\n    });\n    setMap(mapInstance);\n    setMapLoaded(true);\n  };\n  const updateEstimatedDistance = () => {\n    if (!formData.pickupLocation || !formData.dropLocation) return;\n    const directionsService = new window.google.maps.DirectionsService();\n    directionsService.route({\n      origin: formData.pickupLocation,\n      destination: formData.dropLocation,\n      travelMode: 'DRIVING'\n    }, (response, status) => {\n      if (status === 'OK') {\n        // Get distance in kilometers\n        const distanceInMeters = response.routes[0].legs[0].distance.value;\n        const distanceInKm = (distanceInMeters / 1000).toFixed(1);\n        setFormData(prev => ({\n          ...prev,\n          estimatedDistance: distanceInKm\n        }));\n\n        // Optionally show the route\n        const directionsRenderer = new window.google.maps.DirectionsRenderer({\n          map: map,\n          directions: response,\n          suppressMarkers: true // We already have our own markers\n        });\n      }\n    });\n  };\n  const fetchCarDetails = async () => {\n    try {\n      const carDoc = await getDoc(doc(db, 'cars', carId));\n      if (carDoc.exists()) {\n        setCar({\n          id: carDoc.id,\n          ...carDoc.data()\n        });\n      } else {\n        toast.error('Car not found');\n        navigate('/cars');\n      }\n    } catch (error) {\n      toast.error('Error fetching car details: ' + error.message);\n      console.error('Error fetching car details:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchAvailableDrivers = async () => {\n    try {\n      const driversQuery = query(collection(db, 'users'), where('role', '==', 'driver'), where('isAvailable', '==', true));\n      const driversSnapshot = await getDocs(driversQuery);\n      const driversList = driversSnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setAvailableDrivers(driversList);\n    } catch (error) {\n      console.error('Error fetching available drivers:', error);\n    }\n  };\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n  };\n  const calculateBookingCost = () => {\n    if (!car || !formData.estimatedDistance) return;\n    const distance = parseFloat(formData.estimatedDistance);\n    if (isNaN(distance)) return;\n    const distanceCharge = distance * car.pricePerKm;\n    let driverCharge = 0;\n    if (bookingType === 'withDriver' && formData.driverId) {\n      // Add driver charge (for example: fixed amount per day or percentage of the total)\n      driverCharge = 50; // Sample fixed charge\n    }\n    const totalAmount = distanceCharge + driverCharge;\n    setBookingSummary({\n      totalAmount,\n      driverCharge,\n      distanceCharge\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      setLoading(true);\n      if (!currentUser) {\n        toast.error('Please login to continue');\n        navigate('/login');\n        return;\n      }\n      if (!car) {\n        toast.error('Car details not available');\n        return;\n      }\n      if (!formData.customerPhone) {\n        toast.error('Please provide your phone number for driver contact');\n        return;\n      }\n      if (bookingType === 'withDriver' && !formData.driverId) {\n        toast.error('Please select a driver');\n        return;\n      }\n\n      // Prepare booking data\n      const bookingData = {\n        carId: car.id,\n        carName: car.name,\n        carType: car.type,\n        customerId: currentUser.uid,\n        customerName: currentUser.displayName,\n        customerPhone: formData.customerPhone,\n        ...formData,\n        bookingType,\n        driverId: bookingType === 'withDriver' ? formData.driverId : null,\n        status: bookingType === 'withDriver' ? 'assigned' : 'confirmed',\n        totalAmount: bookingSummary.totalAmount,\n        distanceCharge: bookingSummary.distanceCharge,\n        driverCharge: bookingSummary.driverCharge,\n        paymentStatus: 'pending',\n        createdAt: new Date().toISOString()\n      };\n\n      // Add booking to Firestore\n      const bookingRef = await addDoc(collection(db, 'bookings'), bookingData);\n      toast.success('Booking created successfully!');\n\n      // Navigate to payment page\n      navigate(`/payment/${bookingRef.id}`);\n    } catch (error) {\n      toast.error('Error creating booking: ' + error.message);\n      console.error('Error creating booking:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(LoadingSpinner, {\n      text: \"Loading car details...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 12\n    }, this);\n  }\n  if (!car) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xl text-gray-600\",\n        children: \"Car not found. Please try another car.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/cars'),\n        className: \"mt-4 bg-primary text-white px-4 py-2 rounded-md hover:bg-primary-dark transition-colors\",\n        children: \"Back to Cars\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold mb-2\",\n        children: \"Book Your Ride\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600\",\n        children: [\"Complete the form below to book \", car.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-3 gap-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:col-span-1\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-md overflow-hidden\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: car.imageUrl,\n            alt: car.name,\n            className: \"w-full h-48 object-cover\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-bold mb-1\",\n              children: car.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-500 mb-2\",\n              children: car.type\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-primary font-bold mb-3\",\n              children: [\"$\", car.pricePerKm, \" per km\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 15\n            }, this), car.features && car.features.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-sm font-semibold text-gray-600 mb-1\",\n                children: \"Features:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"text-sm text-gray-600\",\n                children: car.features.map((feature, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"flex items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    className: \"h-4 w-4 text-green-500 mr-1\",\n                    fill: \"none\",\n                    viewBox: \"0 0 24 24\",\n                    stroke: \"currentColor\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      strokeLinecap: \"round\",\n                      strokeLinejoin: \"round\",\n                      strokeWidth: 2,\n                      d: \"M5 13l4 4L19 7\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 407,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 406,\n                    columnNumber: 25\n                  }, this), feature]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 405,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 bg-gray-50 p-3 rounded-md\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-sm font-semibold text-gray-600 mb-2\",\n                children: \"Booking Summary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between mb-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Distance Charge:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 420,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"$\", bookingSummary.distanceCharge.toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 421,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 419,\n                  columnNumber: 19\n                }, this), bookingType === 'withDriver' && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between mb-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Driver Charge:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 425,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"$\", bookingSummary.driverCharge.toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 426,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 424,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between font-bold pt-2 border-t border-gray-200 mt-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Total Amount:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 430,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"$\", bookingSummary.totalAmount.toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 431,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 429,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 418,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:col-span-2\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-md p-6\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-gray-700 font-medium mb-2\",\n                children: \"Booking Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 445,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex space-x-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"flex items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"radio\",\n                    name: \"bookingType\",\n                    value: \"withDriver\",\n                    checked: bookingType === 'withDriver',\n                    onChange: () => setBookingType('withDriver'),\n                    className: \"h-4 w-4 text-primary focus:ring-primary border-gray-300\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 448,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"ml-2\",\n                    children: \"With Driver\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 456,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 447,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"flex items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"radio\",\n                    name: \"bookingType\",\n                    value: \"selfDrive\",\n                    checked: bookingType === 'selfDrive',\n                    onChange: () => setBookingType('selfDrive'),\n                    className: \"h-4 w-4 text-primary focus:ring-primary border-gray-300\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 459,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"ml-2\",\n                    children: \"Self Drive\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 467,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 458,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 446,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-lg font-medium mb-2\",\n                children: \"Select Locations on Map\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex space-x-4 mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => setLocationMode('pickup'),\n                  className: `px-4 py-2 rounded ${locationMode === 'pickup' ? 'bg-green-500 text-white' : 'bg-gray-200 text-gray-700'}`,\n                  children: \"Set Pickup\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 476,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => setLocationMode('drop'),\n                  className: `px-4 py-2 rounded ${locationMode === 'drop' ? 'bg-red-500 text-white' : 'bg-gray-200 text-gray-700'}`,\n                  children: \"Set Drop-off\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 487,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 475,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: mapRef,\n                className: \"w-full h-64 rounded-lg border border-gray-300\",\n                children: !mapLoaded && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"h-full flex items-center justify-center bg-gray-100\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"Loading map...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 505,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 504,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 499,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-500 mt-2\",\n                children: \"Click on the map or use the search fields below to set pickup and drop-off locations\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 509,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-gray-700 font-medium mb-2\",\n                  children: \"Pickup Location\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 517,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  id: \"pickupLocation\",\n                  name: \"pickupLocation\",\n                  value: formData.pickupLocation,\n                  onChange: handleInputChange,\n                  className: \"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-primary\",\n                  placeholder: \"Enter or select on map\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 518,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 516,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-gray-700 font-medium mb-2\",\n                  children: \"Drop Location\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 530,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  id: \"dropLocation\",\n                  name: \"dropLocation\",\n                  value: formData.dropLocation,\n                  onChange: handleInputChange,\n                  className: \"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-primary\",\n                  placeholder: \"Enter or select on map\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 531,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 529,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-gray-700 font-medium mb-2\",\n                  children: \"Your Phone Number\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 544,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"tel\",\n                  name: \"customerPhone\",\n                  value: formData.customerPhone,\n                  onChange: handleInputChange,\n                  className: \"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-primary\",\n                  placeholder: \"For driver to contact you\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 545,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 543,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-gray-700 font-medium mb-2\",\n                  children: \"Estimated Distance (km)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 557,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  name: \"estimatedDistance\",\n                  value: formData.estimatedDistance,\n                  onChange: handleInputChange,\n                  readOnly: true,\n                  className: \"w-full px-3 py-2 border rounded bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 558,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-gray-500 mt-1\",\n                  children: \"Automatically calculated based on your selected locations\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 567,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 556,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-gray-700 font-medium mb-2\",\n                  children: \"Pickup Date\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 573,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  name: \"pickupDate\",\n                  value: formData.pickupDate,\n                  onChange: handleInputChange,\n                  min: new Date().toISOString().split('T')[0],\n                  className: \"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-primary\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 574,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 572,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-gray-700 font-medium mb-2\",\n                  children: \"Pickup Time\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 585,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"time\",\n                  name: \"pickupTime\",\n                  value: formData.pickupTime,\n                  onChange: handleInputChange,\n                  className: \"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-primary\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 586,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 584,\n                columnNumber: 17\n              }, this), bookingType === 'selfDrive' && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-gray-700 font-medium mb-2\",\n                    children: \"Return Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 599,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"date\",\n                    name: \"returnDate\",\n                    value: formData.returnDate,\n                    onChange: handleInputChange,\n                    min: formData.pickupDate || new Date().toISOString().split('T')[0],\n                    className: \"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-primary\",\n                    required: bookingType === 'selfDrive'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 600,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 598,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block text-gray-700 font-medium mb-2\",\n                    children: \"Return Time\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 611,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"time\",\n                    name: \"returnTime\",\n                    value: formData.returnTime,\n                    onChange: handleInputChange,\n                    className: \"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-primary\",\n                    required: bookingType === 'selfDrive'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 612,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 610,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true), bookingType === 'withDriver' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"md:col-span-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-gray-700 font-medium mb-2\",\n                  children: \"Select Driver\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 626,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  name: \"driverId\",\n                  value: formData.driverId,\n                  onChange: handleInputChange,\n                  className: \"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-primary\",\n                  required: bookingType === 'withDriver',\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Choose a driver\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 634,\n                    columnNumber: 23\n                  }, this), availableDrivers.map(driver => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: driver.id,\n                    children: [driver.name, \" - Rating: \", driver.rating || '4.5', \"\\u2605\"]\n                  }, driver.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 636,\n                    columnNumber: 25\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 627,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 625,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"md:col-span-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-gray-700 font-medium mb-2\",\n                  children: \"Special Requests (Optional)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 645,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  name: \"specialRequests\",\n                  value: formData.specialRequests,\n                  onChange: handleInputChange,\n                  rows: \"3\",\n                  className: \"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-primary\",\n                  placeholder: \"Any special requests or instructions for the driver...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 646,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 644,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-end\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                disabled: loading,\n                className: \"bg-primary text-white px-6 py-2 rounded font-medium hover:bg-primary-dark transition-colors\",\n                children: loading ? 'Processing...' : 'Proceed to Payment'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 658,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 657,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 384,\n    columnNumber: 5\n  }, this);\n};\n_s(BookingPage, \"P/5qNsDtfxZcu4DiKeZkNYeIHbs=\", false, function () {\n  return [useParams, useAuth, useNavigate];\n});\n_c = BookingPage;\nexport default BookingPage;\nvar _c;\n$RefreshReg$(_c, \"BookingPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","doc","getDoc","collection","query","where","getDocs","addDoc","db","useAuth","toast","LoadingSpinner","jsxDEV","_jsxDEV","Fragment","_Fragment","BookingPage","_s","carId","currentUser","navigate","mapRef","mapLoaded","setMapLoaded","map","setMap","pickupMarker","setPickupMarker","dropMarker","setDropMarker","car","setCar","availableDrivers","setAvailableDrivers","loading","setLoading","bookingType","setBookingType","formData","setFormData","pickupLocation","dropLocation","pickupDate","pickupTime","returnDate","returnTime","estimatedDistance","driverId","specialRequests","customerPhone","bookingSummary","setBookingSummary","totalAmount","driverCharge","distanceCharge","locationMode","setLocationMode","fetchCarDetails","fetchAvailableDrivers","googleMapsScript","document","createElement","src","async","defer","onload","initializeMap","head","appendChild","script","querySelector","remove","phoneNumber","prev","calculateBookingCost","current","defaultLocation","lat","lng","mapInstance","window","google","maps","Map","center","zoom","mapTypeControl","streetViewControl","fullscreenControl","pickupInput","getElementById","pickupAutocomplete","places","Autocomplete","addListener","place","getPlace","geometry","formatted_address","marker","Marker","position","location","icon","url","title","setCenter","updateEstimatedDistance","dropInput","dropAutocomplete","event","geocoder","Geocoder","geocode","latLng","results","status","address","directionsService","DirectionsService","route","origin","destination","travelMode","response","distanceInMeters","routes","legs","distance","value","distanceInKm","toFixed","directionsRenderer","DirectionsRenderer","directions","suppressMarkers","carDoc","exists","id","data","error","message","console","driversQuery","driversSnapshot","driversList","docs","handleInputChange","e","name","target","parseFloat","isNaN","pricePerKm","handleSubmit","preventDefault","bookingData","carName","carType","type","customerId","uid","customerName","displayName","paymentStatus","createdAt","Date","toISOString","bookingRef","success","text","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onClick","imageUrl","alt","features","length","feature","index","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","onSubmit","checked","onChange","ref","placeholder","required","readOnly","min","split","driver","rating","rows","disabled","_c","$RefreshReg$"],"sources":["/Users/yeduruabhiram/Desktop/chiru babai/src/pages/customer/BookingPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { doc, getDoc, collection, query, where, getDocs, addDoc } from 'firebase/firestore';\nimport { db } from '../../firebase/config';\nimport { useAuth } from '../../context/AuthContext';\nimport { toast } from 'react-toastify';\nimport LoadingSpinner from '../../components/common/LoadingSpinner';\n\nconst BookingPage = () => {\n  const { carId } = useParams();\n  const { currentUser } = useAuth();\n  const navigate = useNavigate();\n  const mapRef = useRef(null);\n  const [mapLoaded, setMapLoaded] = useState(false);\n  const [map, setMap] = useState(null);\n  const [pickupMarker, setPickupMarker] = useState(null);\n  const [dropMarker, setDropMarker] = useState(null);\n  \n  const [car, setCar] = useState(null);\n  const [availableDrivers, setAvailableDrivers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [bookingType, setBookingType] = useState('withDriver'); // 'withDriver' or 'selfDrive'\n  const [formData, setFormData] = useState({\n    pickupLocation: '',\n    dropLocation: '',\n    pickupDate: '',\n    pickupTime: '',\n    returnDate: '',\n    returnTime: '',\n    estimatedDistance: '',\n    driverId: '',\n    specialRequests: '',\n    customerPhone: ''\n  });\n  const [bookingSummary, setBookingSummary] = useState({\n    totalAmount: 0,\n    driverCharge: 0,\n    distanceCharge: 0\n  });\n  const [locationMode, setLocationMode] = useState('pickup'); // 'pickup' or 'drop'\n\n  useEffect(() => {\n    if (carId) {\n      fetchCarDetails();\n      fetchAvailableDrivers();\n    }\n    \n    // Load Google Maps API script\n    const googleMapsScript = document.createElement('script');\n    googleMapsScript.src = `https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&libraries=places`;\n    googleMapsScript.async = true;\n    googleMapsScript.defer = true;\n    googleMapsScript.onload = initializeMap;\n    document.head.appendChild(googleMapsScript);\n    \n    return () => {\n      // Clean up the script tag when component unmounts\n      const script = document.querySelector(`script[src*=\"maps.googleapis.com/maps/api\"]`);\n      if (script) {\n        script.remove();\n      }\n    };\n  }, [carId]);\n\n  useEffect(() => {\n    // Prefill customer phone if available in user profile\n    if (currentUser && currentUser.phoneNumber) {\n      setFormData(prev => ({\n        ...prev,\n        customerPhone: currentUser.phoneNumber\n      }));\n    }\n  }, [currentUser]);\n\n  useEffect(() => {\n    // Calculate booking cost whenever relevant form data changes\n    calculateBookingCost();\n  }, [formData.estimatedDistance, car, bookingType, formData.driverId]);\n\n  const initializeMap = () => {\n    if (!mapRef.current) return;\n    \n    const defaultLocation = { lat: 37.7749, lng: -122.4194 }; // San Francisco as default\n    \n    const mapInstance = new window.google.maps.Map(mapRef.current, {\n      center: defaultLocation,\n      zoom: 13,\n      mapTypeControl: false,\n      streetViewControl: false,\n      fullscreenControl: false,\n    });\n    \n    // Initialize autocomplete for pickup location\n    const pickupInput = document.getElementById('pickupLocation');\n    const pickupAutocomplete = new window.google.maps.places.Autocomplete(pickupInput);\n    pickupAutocomplete.addListener('place_changed', () => {\n      const place = pickupAutocomplete.getPlace();\n      if (!place.geometry) return;\n      \n      // Update form with selected location\n      setFormData(prev => ({\n        ...prev,\n        pickupLocation: place.formatted_address\n      }));\n      \n      // Set marker\n      if (pickupMarker) pickupMarker.setMap(null);\n      const marker = new window.google.maps.Marker({\n        map: mapInstance,\n        position: place.geometry.location,\n        icon: {\n          url: 'http://maps.google.com/mapfiles/ms/icons/green-dot.png'\n        },\n        title: 'Pickup Location'\n      });\n      setPickupMarker(marker);\n      \n      // Center map\n      mapInstance.setCenter(place.geometry.location);\n      updateEstimatedDistance();\n    });\n    \n    // Initialize autocomplete for drop location\n    const dropInput = document.getElementById('dropLocation');\n    const dropAutocomplete = new window.google.maps.places.Autocomplete(dropInput);\n    dropAutocomplete.addListener('place_changed', () => {\n      const place = dropAutocomplete.getPlace();\n      if (!place.geometry) return;\n      \n      // Update form with selected location\n      setFormData(prev => ({\n        ...prev,\n        dropLocation: place.formatted_address\n      }));\n      \n      // Set marker\n      if (dropMarker) dropMarker.setMap(null);\n      const marker = new window.google.maps.Marker({\n        map: mapInstance,\n        position: place.geometry.location,\n        icon: {\n          url: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png'\n        },\n        title: 'Drop Location'\n      });\n      setDropMarker(marker);\n      \n      // Center map\n      mapInstance.setCenter(place.geometry.location);\n      updateEstimatedDistance();\n    });\n    \n    // Allow clicking on map to set locations\n    mapInstance.addListener('click', (event) => {\n      const geocoder = new window.google.maps.Geocoder();\n      geocoder.geocode({ 'location': event.latLng }, (results, status) => {\n        if (status === 'OK' && results[0]) {\n          const address = results[0].formatted_address;\n          \n          if (locationMode === 'pickup') {\n            // Update pickup location\n            setFormData(prev => ({\n              ...prev,\n              pickupLocation: address\n            }));\n            \n            // Set marker\n            if (pickupMarker) pickupMarker.setMap(null);\n            const marker = new window.google.maps.Marker({\n              map: mapInstance,\n              position: event.latLng,\n              icon: {\n                url: 'http://maps.google.com/mapfiles/ms/icons/green-dot.png'\n              },\n              title: 'Pickup Location'\n            });\n            setPickupMarker(marker);\n          } else {\n            // Update drop location\n            setFormData(prev => ({\n              ...prev,\n              dropLocation: address\n            }));\n            \n            // Set marker\n            if (dropMarker) dropMarker.setMap(null);\n            const marker = new window.google.maps.Marker({\n              map: mapInstance,\n              position: event.latLng,\n              icon: {\n                url: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png'\n              },\n              title: 'Drop Location'\n            });\n            setDropMarker(marker);\n          }\n          \n          updateEstimatedDistance();\n        }\n      });\n    });\n    \n    setMap(mapInstance);\n    setMapLoaded(true);\n  };\n\n  const updateEstimatedDistance = () => {\n    if (!formData.pickupLocation || !formData.dropLocation) return;\n    \n    const directionsService = new window.google.maps.DirectionsService();\n    directionsService.route({\n      origin: formData.pickupLocation,\n      destination: formData.dropLocation,\n      travelMode: 'DRIVING'\n    }, (response, status) => {\n      if (status === 'OK') {\n        // Get distance in kilometers\n        const distanceInMeters = response.routes[0].legs[0].distance.value;\n        const distanceInKm = (distanceInMeters / 1000).toFixed(1);\n        \n        setFormData(prev => ({\n          ...prev,\n          estimatedDistance: distanceInKm\n        }));\n        \n        // Optionally show the route\n        const directionsRenderer = new window.google.maps.DirectionsRenderer({\n          map: map,\n          directions: response,\n          suppressMarkers: true // We already have our own markers\n        });\n      }\n    });\n  };\n\n  const fetchCarDetails = async () => {\n    try {\n      const carDoc = await getDoc(doc(db, 'cars', carId));\n      if (carDoc.exists()) {\n        setCar({ id: carDoc.id, ...carDoc.data() });\n      } else {\n        toast.error('Car not found');\n        navigate('/cars');\n      }\n    } catch (error) {\n      toast.error('Error fetching car details: ' + error.message);\n      console.error('Error fetching car details:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchAvailableDrivers = async () => {\n    try {\n      const driversQuery = query(\n        collection(db, 'users'),\n        where('role', '==', 'driver'),\n        where('isAvailable', '==', true)\n      );\n      \n      const driversSnapshot = await getDocs(driversQuery);\n      const driversList = driversSnapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      \n      setAvailableDrivers(driversList);\n    } catch (error) {\n      console.error('Error fetching available drivers:', error);\n    }\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n  };\n\n  const calculateBookingCost = () => {\n    if (!car || !formData.estimatedDistance) return;\n    \n    const distance = parseFloat(formData.estimatedDistance);\n    if (isNaN(distance)) return;\n    \n    const distanceCharge = distance * car.pricePerKm;\n    let driverCharge = 0;\n    \n    if (bookingType === 'withDriver' && formData.driverId) {\n      // Add driver charge (for example: fixed amount per day or percentage of the total)\n      driverCharge = 50; // Sample fixed charge\n    }\n    \n    const totalAmount = distanceCharge + driverCharge;\n    \n    setBookingSummary({\n      totalAmount,\n      driverCharge,\n      distanceCharge\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    try {\n      setLoading(true);\n      \n      if (!currentUser) {\n        toast.error('Please login to continue');\n        navigate('/login');\n        return;\n      }\n      \n      if (!car) {\n        toast.error('Car details not available');\n        return;\n      }\n      \n      if (!formData.customerPhone) {\n        toast.error('Please provide your phone number for driver contact');\n        return;\n      }\n      \n      if (bookingType === 'withDriver' && !formData.driverId) {\n        toast.error('Please select a driver');\n        return;\n      }\n      \n      // Prepare booking data\n      const bookingData = {\n        carId: car.id,\n        carName: car.name,\n        carType: car.type,\n        customerId: currentUser.uid,\n        customerName: currentUser.displayName,\n        customerPhone: formData.customerPhone,\n        ...formData,\n        bookingType,\n        driverId: bookingType === 'withDriver' ? formData.driverId : null,\n        status: bookingType === 'withDriver' ? 'assigned' : 'confirmed',\n        totalAmount: bookingSummary.totalAmount,\n        distanceCharge: bookingSummary.distanceCharge,\n        driverCharge: bookingSummary.driverCharge,\n        paymentStatus: 'pending',\n        createdAt: new Date().toISOString()\n      };\n      \n      // Add booking to Firestore\n      const bookingRef = await addDoc(collection(db, 'bookings'), bookingData);\n      \n      toast.success('Booking created successfully!');\n      \n      // Navigate to payment page\n      navigate(`/payment/${bookingRef.id}`);\n    } catch (error) {\n      toast.error('Error creating booking: ' + error.message);\n      console.error('Error creating booking:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return <LoadingSpinner text=\"Loading car details...\" />;\n  }\n\n  if (!car) {\n    return (\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 text-center\">\n        <p className=\"text-xl text-gray-600\">Car not found. Please try another car.</p>\n        <button\n          onClick={() => navigate('/cars')}\n          className=\"mt-4 bg-primary text-white px-4 py-2 rounded-md hover:bg-primary-dark transition-colors\"\n        >\n          Back to Cars\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-bold mb-2\">Book Your Ride</h1>\n        <p className=\"text-gray-600\">Complete the form below to book {car.name}</p>\n      </div>\n      \n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n        {/* Car Details */}\n        <div className=\"lg:col-span-1\">\n          <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n            <img src={car.imageUrl} alt={car.name} className=\"w-full h-48 object-cover\" />\n            <div className=\"p-4\">\n              <h2 className=\"text-xl font-bold mb-1\">{car.name}</h2>\n              <p className=\"text-gray-500 mb-2\">{car.type}</p>\n              <p className=\"text-primary font-bold mb-3\">${car.pricePerKm} per km</p>\n              \n              {car.features && car.features.length > 0 && (\n                <div className=\"mb-3\">\n                  <h3 className=\"text-sm font-semibold text-gray-600 mb-1\">Features:</h3>\n                  <ul className=\"text-sm text-gray-600\">\n                    {car.features.map((feature, index) => (\n                      <li key={index} className=\"flex items-center\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 text-green-500 mr-1\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                        </svg>\n                        {feature}\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n              \n              <div className=\"mt-4 bg-gray-50 p-3 rounded-md\">\n                <h3 className=\"text-sm font-semibold text-gray-600 mb-2\">Booking Summary</h3>\n                <div className=\"text-sm\">\n                  <div className=\"flex justify-between mb-1\">\n                    <span>Distance Charge:</span>\n                    <span>${bookingSummary.distanceCharge.toFixed(2)}</span>\n                  </div>\n                  {bookingType === 'withDriver' && (\n                    <div className=\"flex justify-between mb-1\">\n                      <span>Driver Charge:</span>\n                      <span>${bookingSummary.driverCharge.toFixed(2)}</span>\n                    </div>\n                  )}\n                  <div className=\"flex justify-between font-bold pt-2 border-t border-gray-200 mt-2\">\n                    <span>Total Amount:</span>\n                    <span>${bookingSummary.totalAmount.toFixed(2)}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        {/* Booking Form */}\n        <div className=\"lg:col-span-2\">\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\n            <form onSubmit={handleSubmit}>\n              {/* Booking Type */}\n              <div className=\"mb-6\">\n                <label className=\"block text-gray-700 font-medium mb-2\">Booking Type</label>\n                <div className=\"flex space-x-4\">\n                  <label className=\"flex items-center\">\n                    <input\n                      type=\"radio\"\n                      name=\"bookingType\"\n                      value=\"withDriver\"\n                      checked={bookingType === 'withDriver'}\n                      onChange={() => setBookingType('withDriver')}\n                      className=\"h-4 w-4 text-primary focus:ring-primary border-gray-300\"\n                    />\n                    <span className=\"ml-2\">With Driver</span>\n                  </label>\n                  <label className=\"flex items-center\">\n                    <input\n                      type=\"radio\"\n                      name=\"bookingType\"\n                      value=\"selfDrive\"\n                      checked={bookingType === 'selfDrive'}\n                      onChange={() => setBookingType('selfDrive')}\n                      className=\"h-4 w-4 text-primary focus:ring-primary border-gray-300\"\n                    />\n                    <span className=\"ml-2\">Self Drive</span>\n                  </label>\n                </div>\n              </div>\n\n              {/* Map View */}\n              <div className=\"mb-6\">\n                <h3 className=\"text-lg font-medium mb-2\">Select Locations on Map</h3>\n                <div className=\"flex space-x-4 mb-3\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setLocationMode('pickup')}\n                    className={`px-4 py-2 rounded ${\n                      locationMode === 'pickup' \n                        ? 'bg-green-500 text-white' \n                        : 'bg-gray-200 text-gray-700'\n                    }`}\n                  >\n                    Set Pickup\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => setLocationMode('drop')}\n                    className={`px-4 py-2 rounded ${\n                      locationMode === 'drop' \n                        ? 'bg-red-500 text-white' \n                        : 'bg-gray-200 text-gray-700'\n                    }`}\n                  >\n                    Set Drop-off\n                  </button>\n                </div>\n                <div \n                  ref={mapRef} \n                  className=\"w-full h-64 rounded-lg border border-gray-300\"\n                >\n                  {!mapLoaded && (\n                    <div className=\"h-full flex items-center justify-center bg-gray-100\">\n                      <p>Loading map...</p>\n                    </div>\n                  )}\n                </div>\n                <p className=\"text-sm text-gray-500 mt-2\">\n                  Click on the map or use the search fields below to set pickup and drop-off locations\n                </p>\n              </div>\n\n              {/* Trip Details */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\n                <div>\n                  <label className=\"block text-gray-700 font-medium mb-2\">Pickup Location</label>\n                  <input\n                    type=\"text\"\n                    id=\"pickupLocation\"\n                    name=\"pickupLocation\"\n                    value={formData.pickupLocation}\n                    onChange={handleInputChange}\n                    className=\"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-primary\"\n                    placeholder=\"Enter or select on map\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-gray-700 font-medium mb-2\">Drop Location</label>\n                  <input\n                    type=\"text\"\n                    id=\"dropLocation\"\n                    name=\"dropLocation\"\n                    value={formData.dropLocation}\n                    onChange={handleInputChange}\n                    className=\"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-primary\"\n                    placeholder=\"Enter or select on map\"\n                    required\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-gray-700 font-medium mb-2\">Your Phone Number</label>\n                  <input\n                    type=\"tel\"\n                    name=\"customerPhone\"\n                    value={formData.customerPhone}\n                    onChange={handleInputChange}\n                    className=\"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-primary\"\n                    placeholder=\"For driver to contact you\"\n                    required\n                  />\n                </div>\n                \n                <div>\n                  <label className=\"block text-gray-700 font-medium mb-2\">Estimated Distance (km)</label>\n                  <input\n                    type=\"number\"\n                    name=\"estimatedDistance\"\n                    value={formData.estimatedDistance}\n                    onChange={handleInputChange}\n                    readOnly\n                    className=\"w-full px-3 py-2 border rounded bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary\"\n                    required\n                  />\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    Automatically calculated based on your selected locations\n                  </p>\n                </div>\n                \n                <div>\n                  <label className=\"block text-gray-700 font-medium mb-2\">Pickup Date</label>\n                  <input\n                    type=\"date\"\n                    name=\"pickupDate\"\n                    value={formData.pickupDate}\n                    onChange={handleInputChange}\n                    min={new Date().toISOString().split('T')[0]}\n                    className=\"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-primary\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-gray-700 font-medium mb-2\">Pickup Time</label>\n                  <input\n                    type=\"time\"\n                    name=\"pickupTime\"\n                    value={formData.pickupTime}\n                    onChange={handleInputChange}\n                    className=\"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-primary\"\n                    required\n                  />\n                </div>\n\n                {bookingType === 'selfDrive' && (\n                  <>\n                    <div>\n                      <label className=\"block text-gray-700 font-medium mb-2\">Return Date</label>\n                      <input\n                        type=\"date\"\n                        name=\"returnDate\"\n                        value={formData.returnDate}\n                        onChange={handleInputChange}\n                        min={formData.pickupDate || new Date().toISOString().split('T')[0]}\n                        className=\"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-primary\"\n                        required={bookingType === 'selfDrive'}\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-gray-700 font-medium mb-2\">Return Time</label>\n                      <input\n                        type=\"time\"\n                        name=\"returnTime\"\n                        value={formData.returnTime}\n                        onChange={handleInputChange}\n                        className=\"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-primary\"\n                        required={bookingType === 'selfDrive'}\n                      />\n                    </div>\n                  </>\n                )}\n                \n                {bookingType === 'withDriver' && (\n                  <div className=\"md:col-span-2\">\n                    <label className=\"block text-gray-700 font-medium mb-2\">Select Driver</label>\n                    <select\n                      name=\"driverId\"\n                      value={formData.driverId}\n                      onChange={handleInputChange}\n                      className=\"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-primary\"\n                      required={bookingType === 'withDriver'}\n                    >\n                      <option value=\"\">Choose a driver</option>\n                      {availableDrivers.map(driver => (\n                        <option key={driver.id} value={driver.id}>\n                          {driver.name} - Rating: {driver.rating || '4.5'}★\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                )}\n                \n                <div className=\"md:col-span-2\">\n                  <label className=\"block text-gray-700 font-medium mb-2\">Special Requests (Optional)</label>\n                  <textarea\n                    name=\"specialRequests\"\n                    value={formData.specialRequests}\n                    onChange={handleInputChange}\n                    rows=\"3\"\n                    className=\"w-full px-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-primary\"\n                    placeholder=\"Any special requests or instructions for the driver...\"\n                  ></textarea>\n                </div>\n              </div>\n\n              <div className=\"flex justify-end\">\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className=\"bg-primary text-white px-6 py-2 rounded font-medium hover:bg-primary-dark transition-colors\"\n                >\n                  {loading ? 'Processing...' : 'Proceed to Payment'}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BookingPage;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,SAAS,EAAEC,WAAW,QAAQ,kBAAkB;AACzD,SAASC,GAAG,EAAEC,MAAM,EAAEC,UAAU,EAAEC,KAAK,EAAEC,KAAK,EAAEC,OAAO,EAAEC,MAAM,QAAQ,oBAAoB;AAC3F,SAASC,EAAE,QAAQ,uBAAuB;AAC1C,SAASC,OAAO,QAAQ,2BAA2B;AACnD,SAASC,KAAK,QAAQ,gBAAgB;AACtC,OAAOC,cAAc,MAAM,wCAAwC;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEpE,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACxB,MAAM;IAAEC;EAAM,CAAC,GAAGnB,SAAS,CAAC,CAAC;EAC7B,MAAM;IAAEoB;EAAY,CAAC,GAAGV,OAAO,CAAC,CAAC;EACjC,MAAMW,QAAQ,GAAGpB,WAAW,CAAC,CAAC;EAC9B,MAAMqB,MAAM,GAAGvB,MAAM,CAAC,IAAI,CAAC;EAC3B,MAAM,CAACwB,SAAS,EAAEC,YAAY,CAAC,GAAG3B,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAAC4B,GAAG,EAAEC,MAAM,CAAC,GAAG7B,QAAQ,CAAC,IAAI,CAAC;EACpC,MAAM,CAAC8B,YAAY,EAAEC,eAAe,CAAC,GAAG/B,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACgC,UAAU,EAAEC,aAAa,CAAC,GAAGjC,QAAQ,CAAC,IAAI,CAAC;EAElD,MAAM,CAACkC,GAAG,EAAEC,MAAM,CAAC,GAAGnC,QAAQ,CAAC,IAAI,CAAC;EACpC,MAAM,CAACoC,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGrC,QAAQ,CAAC,EAAE,CAAC;EAC5D,MAAM,CAACsC,OAAO,EAAEC,UAAU,CAAC,GAAGvC,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACwC,WAAW,EAAEC,cAAc,CAAC,GAAGzC,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC;EAC9D,MAAM,CAAC0C,QAAQ,EAAEC,WAAW,CAAC,GAAG3C,QAAQ,CAAC;IACvC4C,cAAc,EAAE,EAAE;IAClBC,YAAY,EAAE,EAAE;IAChBC,UAAU,EAAE,EAAE;IACdC,UAAU,EAAE,EAAE;IACdC,UAAU,EAAE,EAAE;IACdC,UAAU,EAAE,EAAE;IACdC,iBAAiB,EAAE,EAAE;IACrBC,QAAQ,EAAE,EAAE;IACZC,eAAe,EAAE,EAAE;IACnBC,aAAa,EAAE;EACjB,CAAC,CAAC;EACF,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGvD,QAAQ,CAAC;IACnDwD,WAAW,EAAE,CAAC;IACdC,YAAY,EAAE,CAAC;IACfC,cAAc,EAAE;EAClB,CAAC,CAAC;EACF,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAG5D,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC;;EAE5DC,SAAS,CAAC,MAAM;IACd,IAAIqB,KAAK,EAAE;MACTuC,eAAe,CAAC,CAAC;MACjBC,qBAAqB,CAAC,CAAC;IACzB;;IAEA;IACA,MAAMC,gBAAgB,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;IACzDF,gBAAgB,CAACG,GAAG,GAAG,uFAAuF;IAC9GH,gBAAgB,CAACI,KAAK,GAAG,IAAI;IAC7BJ,gBAAgB,CAACK,KAAK,GAAG,IAAI;IAC7BL,gBAAgB,CAACM,MAAM,GAAGC,aAAa;IACvCN,QAAQ,CAACO,IAAI,CAACC,WAAW,CAACT,gBAAgB,CAAC;IAE3C,OAAO,MAAM;MACX;MACA,MAAMU,MAAM,GAAGT,QAAQ,CAACU,aAAa,CAAC,6CAA6C,CAAC;MACpF,IAAID,MAAM,EAAE;QACVA,MAAM,CAACE,MAAM,CAAC,CAAC;MACjB;IACF,CAAC;EACH,CAAC,EAAE,CAACrD,KAAK,CAAC,CAAC;EAEXrB,SAAS,CAAC,MAAM;IACd;IACA,IAAIsB,WAAW,IAAIA,WAAW,CAACqD,WAAW,EAAE;MAC1CjC,WAAW,CAACkC,IAAI,KAAK;QACnB,GAAGA,IAAI;QACPxB,aAAa,EAAE9B,WAAW,CAACqD;MAC7B,CAAC,CAAC,CAAC;IACL;EACF,CAAC,EAAE,CAACrD,WAAW,CAAC,CAAC;EAEjBtB,SAAS,CAAC,MAAM;IACd;IACA6E,oBAAoB,CAAC,CAAC;EACxB,CAAC,EAAE,CAACpC,QAAQ,CAACQ,iBAAiB,EAAEhB,GAAG,EAAEM,WAAW,EAAEE,QAAQ,CAACS,QAAQ,CAAC,CAAC;EAErE,MAAMmB,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAI,CAAC7C,MAAM,CAACsD,OAAO,EAAE;IAErB,MAAMC,eAAe,GAAG;MAAEC,GAAG,EAAE,OAAO;MAAEC,GAAG,EAAE,CAAC;IAAS,CAAC,CAAC,CAAC;;IAE1D,MAAMC,WAAW,GAAG,IAAIC,MAAM,CAACC,MAAM,CAACC,IAAI,CAACC,GAAG,CAAC9D,MAAM,CAACsD,OAAO,EAAE;MAC7DS,MAAM,EAAER,eAAe;MACvBS,IAAI,EAAE,EAAE;MACRC,cAAc,EAAE,KAAK;MACrBC,iBAAiB,EAAE,KAAK;MACxBC,iBAAiB,EAAE;IACrB,CAAC,CAAC;;IAEF;IACA,MAAMC,WAAW,GAAG7B,QAAQ,CAAC8B,cAAc,CAAC,gBAAgB,CAAC;IAC7D,MAAMC,kBAAkB,GAAG,IAAIX,MAAM,CAACC,MAAM,CAACC,IAAI,CAACU,MAAM,CAACC,YAAY,CAACJ,WAAW,CAAC;IAClFE,kBAAkB,CAACG,WAAW,CAAC,eAAe,EAAE,MAAM;MACpD,MAAMC,KAAK,GAAGJ,kBAAkB,CAACK,QAAQ,CAAC,CAAC;MAC3C,IAAI,CAACD,KAAK,CAACE,QAAQ,EAAE;;MAErB;MACA1D,WAAW,CAACkC,IAAI,KAAK;QACnB,GAAGA,IAAI;QACPjC,cAAc,EAAEuD,KAAK,CAACG;MACxB,CAAC,CAAC,CAAC;;MAEH;MACA,IAAIxE,YAAY,EAAEA,YAAY,CAACD,MAAM,CAAC,IAAI,CAAC;MAC3C,MAAM0E,MAAM,GAAG,IAAInB,MAAM,CAACC,MAAM,CAACC,IAAI,CAACkB,MAAM,CAAC;QAC3C5E,GAAG,EAAEuD,WAAW;QAChBsB,QAAQ,EAAEN,KAAK,CAACE,QAAQ,CAACK,QAAQ;QACjCC,IAAI,EAAE;UACJC,GAAG,EAAE;QACP,CAAC;QACDC,KAAK,EAAE;MACT,CAAC,CAAC;MACF9E,eAAe,CAACwE,MAAM,CAAC;;MAEvB;MACApB,WAAW,CAAC2B,SAAS,CAACX,KAAK,CAACE,QAAQ,CAACK,QAAQ,CAAC;MAC9CK,uBAAuB,CAAC,CAAC;IAC3B,CAAC,CAAC;;IAEF;IACA,MAAMC,SAAS,GAAGhD,QAAQ,CAAC8B,cAAc,CAAC,cAAc,CAAC;IACzD,MAAMmB,gBAAgB,GAAG,IAAI7B,MAAM,CAACC,MAAM,CAACC,IAAI,CAACU,MAAM,CAACC,YAAY,CAACe,SAAS,CAAC;IAC9EC,gBAAgB,CAACf,WAAW,CAAC,eAAe,EAAE,MAAM;MAClD,MAAMC,KAAK,GAAGc,gBAAgB,CAACb,QAAQ,CAAC,CAAC;MACzC,IAAI,CAACD,KAAK,CAACE,QAAQ,EAAE;;MAErB;MACA1D,WAAW,CAACkC,IAAI,KAAK;QACnB,GAAGA,IAAI;QACPhC,YAAY,EAAEsD,KAAK,CAACG;MACtB,CAAC,CAAC,CAAC;;MAEH;MACA,IAAItE,UAAU,EAAEA,UAAU,CAACH,MAAM,CAAC,IAAI,CAAC;MACvC,MAAM0E,MAAM,GAAG,IAAInB,MAAM,CAACC,MAAM,CAACC,IAAI,CAACkB,MAAM,CAAC;QAC3C5E,GAAG,EAAEuD,WAAW;QAChBsB,QAAQ,EAAEN,KAAK,CAACE,QAAQ,CAACK,QAAQ;QACjCC,IAAI,EAAE;UACJC,GAAG,EAAE;QACP,CAAC;QACDC,KAAK,EAAE;MACT,CAAC,CAAC;MACF5E,aAAa,CAACsE,MAAM,CAAC;;MAErB;MACApB,WAAW,CAAC2B,SAAS,CAACX,KAAK,CAACE,QAAQ,CAACK,QAAQ,CAAC;MAC9CK,uBAAuB,CAAC,CAAC;IAC3B,CAAC,CAAC;;IAEF;IACA5B,WAAW,CAACe,WAAW,CAAC,OAAO,EAAGgB,KAAK,IAAK;MAC1C,MAAMC,QAAQ,GAAG,IAAI/B,MAAM,CAACC,MAAM,CAACC,IAAI,CAAC8B,QAAQ,CAAC,CAAC;MAClDD,QAAQ,CAACE,OAAO,CAAC;QAAE,UAAU,EAAEH,KAAK,CAACI;MAAO,CAAC,EAAE,CAACC,OAAO,EAAEC,MAAM,KAAK;QAClE,IAAIA,MAAM,KAAK,IAAI,IAAID,OAAO,CAAC,CAAC,CAAC,EAAE;UACjC,MAAME,OAAO,GAAGF,OAAO,CAAC,CAAC,CAAC,CAACjB,iBAAiB;UAE5C,IAAI3C,YAAY,KAAK,QAAQ,EAAE;YAC7B;YACAhB,WAAW,CAACkC,IAAI,KAAK;cACnB,GAAGA,IAAI;cACPjC,cAAc,EAAE6E;YAClB,CAAC,CAAC,CAAC;;YAEH;YACA,IAAI3F,YAAY,EAAEA,YAAY,CAACD,MAAM,CAAC,IAAI,CAAC;YAC3C,MAAM0E,MAAM,GAAG,IAAInB,MAAM,CAACC,MAAM,CAACC,IAAI,CAACkB,MAAM,CAAC;cAC3C5E,GAAG,EAAEuD,WAAW;cAChBsB,QAAQ,EAAES,KAAK,CAACI,MAAM;cACtBX,IAAI,EAAE;gBACJC,GAAG,EAAE;cACP,CAAC;cACDC,KAAK,EAAE;YACT,CAAC,CAAC;YACF9E,eAAe,CAACwE,MAAM,CAAC;UACzB,CAAC,MAAM;YACL;YACA5D,WAAW,CAACkC,IAAI,KAAK;cACnB,GAAGA,IAAI;cACPhC,YAAY,EAAE4E;YAChB,CAAC,CAAC,CAAC;;YAEH;YACA,IAAIzF,UAAU,EAAEA,UAAU,CAACH,MAAM,CAAC,IAAI,CAAC;YACvC,MAAM0E,MAAM,GAAG,IAAInB,MAAM,CAACC,MAAM,CAACC,IAAI,CAACkB,MAAM,CAAC;cAC3C5E,GAAG,EAAEuD,WAAW;cAChBsB,QAAQ,EAAES,KAAK,CAACI,MAAM;cACtBX,IAAI,EAAE;gBACJC,GAAG,EAAE;cACP,CAAC;cACDC,KAAK,EAAE;YACT,CAAC,CAAC;YACF5E,aAAa,CAACsE,MAAM,CAAC;UACvB;UAEAQ,uBAAuB,CAAC,CAAC;QAC3B;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;IAEFlF,MAAM,CAACsD,WAAW,CAAC;IACnBxD,YAAY,CAAC,IAAI,CAAC;EACpB,CAAC;EAED,MAAMoF,uBAAuB,GAAGA,CAAA,KAAM;IACpC,IAAI,CAACrE,QAAQ,CAACE,cAAc,IAAI,CAACF,QAAQ,CAACG,YAAY,EAAE;IAExD,MAAM6E,iBAAiB,GAAG,IAAItC,MAAM,CAACC,MAAM,CAACC,IAAI,CAACqC,iBAAiB,CAAC,CAAC;IACpED,iBAAiB,CAACE,KAAK,CAAC;MACtBC,MAAM,EAAEnF,QAAQ,CAACE,cAAc;MAC/BkF,WAAW,EAAEpF,QAAQ,CAACG,YAAY;MAClCkF,UAAU,EAAE;IACd,CAAC,EAAE,CAACC,QAAQ,EAAER,MAAM,KAAK;MACvB,IAAIA,MAAM,KAAK,IAAI,EAAE;QACnB;QACA,MAAMS,gBAAgB,GAAGD,QAAQ,CAACE,MAAM,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAACC,QAAQ,CAACC,KAAK;QAClE,MAAMC,YAAY,GAAG,CAACL,gBAAgB,GAAG,IAAI,EAAEM,OAAO,CAAC,CAAC,CAAC;QAEzD5F,WAAW,CAACkC,IAAI,KAAK;UACnB,GAAGA,IAAI;UACP3B,iBAAiB,EAAEoF;QACrB,CAAC,CAAC,CAAC;;QAEH;QACA,MAAME,kBAAkB,GAAG,IAAIpD,MAAM,CAACC,MAAM,CAACC,IAAI,CAACmD,kBAAkB,CAAC;UACnE7G,GAAG,EAAEA,GAAG;UACR8G,UAAU,EAAEV,QAAQ;UACpBW,eAAe,EAAE,IAAI,CAAC;QACxB,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;EACJ,CAAC;EAED,MAAM9E,eAAe,GAAG,MAAAA,CAAA,KAAY;IAClC,IAAI;MACF,MAAM+E,MAAM,GAAG,MAAMtI,MAAM,CAACD,GAAG,CAACO,EAAE,EAAE,MAAM,EAAEU,KAAK,CAAC,CAAC;MACnD,IAAIsH,MAAM,CAACC,MAAM,CAAC,CAAC,EAAE;QACnB1G,MAAM,CAAC;UAAE2G,EAAE,EAAEF,MAAM,CAACE,EAAE;UAAE,GAAGF,MAAM,CAACG,IAAI,CAAC;QAAE,CAAC,CAAC;MAC7C,CAAC,MAAM;QACLjI,KAAK,CAACkI,KAAK,CAAC,eAAe,CAAC;QAC5BxH,QAAQ,CAAC,OAAO,CAAC;MACnB;IACF,CAAC,CAAC,OAAOwH,KAAK,EAAE;MACdlI,KAAK,CAACkI,KAAK,CAAC,8BAA8B,GAAGA,KAAK,CAACC,OAAO,CAAC;MAC3DC,OAAO,CAACF,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;IACrD,CAAC,SAAS;MACRzG,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMuB,qBAAqB,GAAG,MAAAA,CAAA,KAAY;IACxC,IAAI;MACF,MAAMqF,YAAY,GAAG3I,KAAK,CACxBD,UAAU,CAACK,EAAE,EAAE,OAAO,CAAC,EACvBH,KAAK,CAAC,MAAM,EAAE,IAAI,EAAE,QAAQ,CAAC,EAC7BA,KAAK,CAAC,aAAa,EAAE,IAAI,EAAE,IAAI,CACjC,CAAC;MAED,MAAM2I,eAAe,GAAG,MAAM1I,OAAO,CAACyI,YAAY,CAAC;MACnD,MAAME,WAAW,GAAGD,eAAe,CAACE,IAAI,CAAC1H,GAAG,CAACvB,GAAG,KAAK;QACnDyI,EAAE,EAAEzI,GAAG,CAACyI,EAAE;QACV,GAAGzI,GAAG,CAAC0I,IAAI,CAAC;MACd,CAAC,CAAC,CAAC;MAEH1G,mBAAmB,CAACgH,WAAW,CAAC;IAClC,CAAC,CAAC,OAAOL,KAAK,EAAE;MACdE,OAAO,CAACF,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;IAC3D;EACF,CAAC;EAED,MAAMO,iBAAiB,GAAIC,CAAC,IAAK;IAC/B,MAAM;MAAEC,IAAI;MAAEpB;IAAM,CAAC,GAAGmB,CAAC,CAACE,MAAM;IAChC/G,WAAW,CAAC;MACV,GAAGD,QAAQ;MACX,CAAC+G,IAAI,GAAGpB;IACV,CAAC,CAAC;EACJ,CAAC;EAED,MAAMvD,oBAAoB,GAAGA,CAAA,KAAM;IACjC,IAAI,CAAC5C,GAAG,IAAI,CAACQ,QAAQ,CAACQ,iBAAiB,EAAE;IAEzC,MAAMkF,QAAQ,GAAGuB,UAAU,CAACjH,QAAQ,CAACQ,iBAAiB,CAAC;IACvD,IAAI0G,KAAK,CAACxB,QAAQ,CAAC,EAAE;IAErB,MAAM1E,cAAc,GAAG0E,QAAQ,GAAGlG,GAAG,CAAC2H,UAAU;IAChD,IAAIpG,YAAY,GAAG,CAAC;IAEpB,IAAIjB,WAAW,KAAK,YAAY,IAAIE,QAAQ,CAACS,QAAQ,EAAE;MACrD;MACAM,YAAY,GAAG,EAAE,CAAC,CAAC;IACrB;IAEA,MAAMD,WAAW,GAAGE,cAAc,GAAGD,YAAY;IAEjDF,iBAAiB,CAAC;MAChBC,WAAW;MACXC,YAAY;MACZC;IACF,CAAC,CAAC;EACJ,CAAC;EAED,MAAMoG,YAAY,GAAG,MAAON,CAAC,IAAK;IAChCA,CAAC,CAACO,cAAc,CAAC,CAAC;IAElB,IAAI;MACFxH,UAAU,CAAC,IAAI,CAAC;MAEhB,IAAI,CAAChB,WAAW,EAAE;QAChBT,KAAK,CAACkI,KAAK,CAAC,0BAA0B,CAAC;QACvCxH,QAAQ,CAAC,QAAQ,CAAC;QAClB;MACF;MAEA,IAAI,CAACU,GAAG,EAAE;QACRpB,KAAK,CAACkI,KAAK,CAAC,2BAA2B,CAAC;QACxC;MACF;MAEA,IAAI,CAACtG,QAAQ,CAACW,aAAa,EAAE;QAC3BvC,KAAK,CAACkI,KAAK,CAAC,qDAAqD,CAAC;QAClE;MACF;MAEA,IAAIxG,WAAW,KAAK,YAAY,IAAI,CAACE,QAAQ,CAACS,QAAQ,EAAE;QACtDrC,KAAK,CAACkI,KAAK,CAAC,wBAAwB,CAAC;QACrC;MACF;;MAEA;MACA,MAAMgB,WAAW,GAAG;QAClB1I,KAAK,EAAEY,GAAG,CAAC4G,EAAE;QACbmB,OAAO,EAAE/H,GAAG,CAACuH,IAAI;QACjBS,OAAO,EAAEhI,GAAG,CAACiI,IAAI;QACjBC,UAAU,EAAE7I,WAAW,CAAC8I,GAAG;QAC3BC,YAAY,EAAE/I,WAAW,CAACgJ,WAAW;QACrClH,aAAa,EAAEX,QAAQ,CAACW,aAAa;QACrC,GAAGX,QAAQ;QACXF,WAAW;QACXW,QAAQ,EAAEX,WAAW,KAAK,YAAY,GAAGE,QAAQ,CAACS,QAAQ,GAAG,IAAI;QACjEqE,MAAM,EAAEhF,WAAW,KAAK,YAAY,GAAG,UAAU,GAAG,WAAW;QAC/DgB,WAAW,EAAEF,cAAc,CAACE,WAAW;QACvCE,cAAc,EAAEJ,cAAc,CAACI,cAAc;QAC7CD,YAAY,EAAEH,cAAc,CAACG,YAAY;QACzC+G,aAAa,EAAE,SAAS;QACxBC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;MACpC,CAAC;;MAED;MACA,MAAMC,UAAU,GAAG,MAAMjK,MAAM,CAACJ,UAAU,CAACK,EAAE,EAAE,UAAU,CAAC,EAAEoJ,WAAW,CAAC;MAExElJ,KAAK,CAAC+J,OAAO,CAAC,+BAA+B,CAAC;;MAE9C;MACArJ,QAAQ,CAAC,YAAYoJ,UAAU,CAAC9B,EAAE,EAAE,CAAC;IACvC,CAAC,CAAC,OAAOE,KAAK,EAAE;MACdlI,KAAK,CAACkI,KAAK,CAAC,0BAA0B,GAAGA,KAAK,CAACC,OAAO,CAAC;MACvDC,OAAO,CAACF,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IACjD,CAAC,SAAS;MACRzG,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,IAAID,OAAO,EAAE;IACX,oBAAOrB,OAAA,CAACF,cAAc;MAAC+J,IAAI,EAAC;IAAwB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACzD;EAEA,IAAI,CAAChJ,GAAG,EAAE;IACR,oBACEjB,OAAA;MAAKkK,SAAS,EAAC,0DAA0D;MAAAC,QAAA,gBACvEnK,OAAA;QAAGkK,SAAS,EAAC,uBAAuB;QAAAC,QAAA,EAAC;MAAsC;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eAC/EjK,OAAA;QACEoK,OAAO,EAAEA,CAAA,KAAM7J,QAAQ,CAAC,OAAO,CAAE;QACjC2J,SAAS,EAAC,yFAAyF;QAAAC,QAAA,EACpG;MAED;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC;EAEV;EAEA,oBACEjK,OAAA;IAAKkK,SAAS,EAAC,6CAA6C;IAAAC,QAAA,gBAC1DnK,OAAA;MAAKkK,SAAS,EAAC,MAAM;MAAAC,QAAA,gBACnBnK,OAAA;QAAIkK,SAAS,EAAC,yBAAyB;QAAAC,QAAA,EAAC;MAAc;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC3DjK,OAAA;QAAGkK,SAAS,EAAC,eAAe;QAAAC,QAAA,GAAC,kCAAgC,EAAClJ,GAAG,CAACuH,IAAI;MAAA;QAAAsB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxE,CAAC,eAENjK,OAAA;MAAKkK,SAAS,EAAC,uCAAuC;MAAAC,QAAA,gBAEpDnK,OAAA;QAAKkK,SAAS,EAAC,eAAe;QAAAC,QAAA,eAC5BnK,OAAA;UAAKkK,SAAS,EAAC,+CAA+C;UAAAC,QAAA,gBAC5DnK,OAAA;YAAKiD,GAAG,EAAEhC,GAAG,CAACoJ,QAAS;YAACC,GAAG,EAAErJ,GAAG,CAACuH,IAAK;YAAC0B,SAAS,EAAC;UAA0B;YAAAJ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAC9EjK,OAAA;YAAKkK,SAAS,EAAC,KAAK;YAAAC,QAAA,gBAClBnK,OAAA;cAAIkK,SAAS,EAAC,wBAAwB;cAAAC,QAAA,EAAElJ,GAAG,CAACuH;YAAI;cAAAsB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACtDjK,OAAA;cAAGkK,SAAS,EAAC,oBAAoB;cAAAC,QAAA,EAAElJ,GAAG,CAACiI;YAAI;cAAAY,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAChDjK,OAAA;cAAGkK,SAAS,EAAC,6BAA6B;cAAAC,QAAA,GAAC,GAAC,EAAClJ,GAAG,CAAC2H,UAAU,EAAC,SAAO;YAAA;cAAAkB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,EAEtEhJ,GAAG,CAACsJ,QAAQ,IAAItJ,GAAG,CAACsJ,QAAQ,CAACC,MAAM,GAAG,CAAC,iBACtCxK,OAAA;cAAKkK,SAAS,EAAC,MAAM;cAAAC,QAAA,gBACnBnK,OAAA;gBAAIkK,SAAS,EAAC,0CAA0C;gBAAAC,QAAA,EAAC;cAAS;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACvEjK,OAAA;gBAAIkK,SAAS,EAAC,uBAAuB;gBAAAC,QAAA,EAClClJ,GAAG,CAACsJ,QAAQ,CAAC5J,GAAG,CAAC,CAAC8J,OAAO,EAAEC,KAAK,kBAC/B1K,OAAA;kBAAgBkK,SAAS,EAAC,mBAAmB;kBAAAC,QAAA,gBAC3CnK,OAAA;oBAAK2K,KAAK,EAAC,4BAA4B;oBAACT,SAAS,EAAC,6BAA6B;oBAACU,IAAI,EAAC,MAAM;oBAACC,OAAO,EAAC,WAAW;oBAACC,MAAM,EAAC,cAAc;oBAAAX,QAAA,eACnInK,OAAA;sBAAM+K,aAAa,EAAC,OAAO;sBAACC,cAAc,EAAC,OAAO;sBAACC,WAAW,EAAE,CAAE;sBAACC,CAAC,EAAC;oBAAgB;sBAAApB,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACrF,CAAC,EACLQ,OAAO;gBAAA,GAJDC,KAAK;kBAAAZ,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAKV,CACL;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACA,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACF,CACN,eAEDjK,OAAA;cAAKkK,SAAS,EAAC,gCAAgC;cAAAC,QAAA,gBAC7CnK,OAAA;gBAAIkK,SAAS,EAAC,0CAA0C;gBAAAC,QAAA,EAAC;cAAe;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC7EjK,OAAA;gBAAKkK,SAAS,EAAC,SAAS;gBAAAC,QAAA,gBACtBnK,OAAA;kBAAKkK,SAAS,EAAC,2BAA2B;kBAAAC,QAAA,gBACxCnK,OAAA;oBAAAmK,QAAA,EAAM;kBAAgB;oBAAAL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eAC7BjK,OAAA;oBAAAmK,QAAA,GAAM,GAAC,EAAC9H,cAAc,CAACI,cAAc,CAAC6E,OAAO,CAAC,CAAC,CAAC;kBAAA;oBAAAwC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACrD,CAAC,EACL1I,WAAW,KAAK,YAAY,iBAC3BvB,OAAA;kBAAKkK,SAAS,EAAC,2BAA2B;kBAAAC,QAAA,gBACxCnK,OAAA;oBAAAmK,QAAA,EAAM;kBAAc;oBAAAL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eAC3BjK,OAAA;oBAAAmK,QAAA,GAAM,GAAC,EAAC9H,cAAc,CAACG,YAAY,CAAC8E,OAAO,CAAC,CAAC,CAAC;kBAAA;oBAAAwC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACnD,CACN,eACDjK,OAAA;kBAAKkK,SAAS,EAAC,mEAAmE;kBAAAC,QAAA,gBAChFnK,OAAA;oBAAAmK,QAAA,EAAM;kBAAa;oBAAAL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,eAC1BjK,OAAA;oBAAAmK,QAAA,GAAM,GAAC,EAAC9H,cAAc,CAACE,WAAW,CAAC+E,OAAO,CAAC,CAAC,CAAC;kBAAA;oBAAAwC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAClD,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGNjK,OAAA;QAAKkK,SAAS,EAAC,eAAe;QAAAC,QAAA,eAC5BnK,OAAA;UAAKkK,SAAS,EAAC,mCAAmC;UAAAC,QAAA,eAChDnK,OAAA;YAAMmL,QAAQ,EAAEtC,YAAa;YAAAsB,QAAA,gBAE3BnK,OAAA;cAAKkK,SAAS,EAAC,MAAM;cAAAC,QAAA,gBACnBnK,OAAA;gBAAOkK,SAAS,EAAC,sCAAsC;gBAAAC,QAAA,EAAC;cAAY;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eAC5EjK,OAAA;gBAAKkK,SAAS,EAAC,gBAAgB;gBAAAC,QAAA,gBAC7BnK,OAAA;kBAAOkK,SAAS,EAAC,mBAAmB;kBAAAC,QAAA,gBAClCnK,OAAA;oBACEkJ,IAAI,EAAC,OAAO;oBACZV,IAAI,EAAC,aAAa;oBAClBpB,KAAK,EAAC,YAAY;oBAClBgE,OAAO,EAAE7J,WAAW,KAAK,YAAa;oBACtC8J,QAAQ,EAAEA,CAAA,KAAM7J,cAAc,CAAC,YAAY,CAAE;oBAC7C0I,SAAS,EAAC;kBAAyD;oBAAAJ,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACpE,CAAC,eACFjK,OAAA;oBAAMkK,SAAS,EAAC,MAAM;oBAAAC,QAAA,EAAC;kBAAW;oBAAAL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACpC,CAAC,eACRjK,OAAA;kBAAOkK,SAAS,EAAC,mBAAmB;kBAAAC,QAAA,gBAClCnK,OAAA;oBACEkJ,IAAI,EAAC,OAAO;oBACZV,IAAI,EAAC,aAAa;oBAClBpB,KAAK,EAAC,WAAW;oBACjBgE,OAAO,EAAE7J,WAAW,KAAK,WAAY;oBACrC8J,QAAQ,EAAEA,CAAA,KAAM7J,cAAc,CAAC,WAAW,CAAE;oBAC5C0I,SAAS,EAAC;kBAAyD;oBAAAJ,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACpE,CAAC,eACFjK,OAAA;oBAAMkK,SAAS,EAAC,MAAM;oBAAAC,QAAA,EAAC;kBAAU;oBAAAL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACnC,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACL,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eAGNjK,OAAA;cAAKkK,SAAS,EAAC,MAAM;cAAAC,QAAA,gBACnBnK,OAAA;gBAAIkK,SAAS,EAAC,0BAA0B;gBAAAC,QAAA,EAAC;cAAuB;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACrEjK,OAAA;gBAAKkK,SAAS,EAAC,qBAAqB;gBAAAC,QAAA,gBAClCnK,OAAA;kBACEkJ,IAAI,EAAC,QAAQ;kBACbkB,OAAO,EAAEA,CAAA,KAAMzH,eAAe,CAAC,QAAQ,CAAE;kBACzCuH,SAAS,EAAE,qBACTxH,YAAY,KAAK,QAAQ,GACrB,yBAAyB,GACzB,2BAA2B,EAC9B;kBAAAyH,QAAA,EACJ;gBAED;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,eACTjK,OAAA;kBACEkJ,IAAI,EAAC,QAAQ;kBACbkB,OAAO,EAAEA,CAAA,KAAMzH,eAAe,CAAC,MAAM,CAAE;kBACvCuH,SAAS,EAAE,qBACTxH,YAAY,KAAK,MAAM,GACnB,uBAAuB,GACvB,2BAA2B,EAC9B;kBAAAyH,QAAA,EACJ;gBAED;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC,eACNjK,OAAA;gBACEsL,GAAG,EAAE9K,MAAO;gBACZ0J,SAAS,EAAC,+CAA+C;gBAAAC,QAAA,EAExD,CAAC1J,SAAS,iBACTT,OAAA;kBAAKkK,SAAS,EAAC,qDAAqD;kBAAAC,QAAA,eAClEnK,OAAA;oBAAAmK,QAAA,EAAG;kBAAc;oBAAAL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAG;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAClB;cACN;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC,eACNjK,OAAA;gBAAGkK,SAAS,EAAC,4BAA4B;gBAAAC,QAAA,EAAC;cAE1C;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CAAC,eAGNjK,OAAA;cAAKkK,SAAS,EAAC,4CAA4C;cAAAC,QAAA,gBACzDnK,OAAA;gBAAAmK,QAAA,gBACEnK,OAAA;kBAAOkK,SAAS,EAAC,sCAAsC;kBAAAC,QAAA,EAAC;gBAAe;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC/EjK,OAAA;kBACEkJ,IAAI,EAAC,MAAM;kBACXrB,EAAE,EAAC,gBAAgB;kBACnBW,IAAI,EAAC,gBAAgB;kBACrBpB,KAAK,EAAE3F,QAAQ,CAACE,cAAe;kBAC/B0J,QAAQ,EAAE/C,iBAAkB;kBAC5B4B,SAAS,EAAC,oFAAoF;kBAC9FqB,WAAW,EAAC,wBAAwB;kBACpCC,QAAQ;gBAAA;kBAAA1B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACT,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,eACNjK,OAAA;gBAAAmK,QAAA,gBACEnK,OAAA;kBAAOkK,SAAS,EAAC,sCAAsC;kBAAAC,QAAA,EAAC;gBAAa;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC7EjK,OAAA;kBACEkJ,IAAI,EAAC,MAAM;kBACXrB,EAAE,EAAC,cAAc;kBACjBW,IAAI,EAAC,cAAc;kBACnBpB,KAAK,EAAE3F,QAAQ,CAACG,YAAa;kBAC7ByJ,QAAQ,EAAE/C,iBAAkB;kBAC5B4B,SAAS,EAAC,oFAAoF;kBAC9FqB,WAAW,EAAC,wBAAwB;kBACpCC,QAAQ;gBAAA;kBAAA1B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACT,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,eAENjK,OAAA;gBAAAmK,QAAA,gBACEnK,OAAA;kBAAOkK,SAAS,EAAC,sCAAsC;kBAAAC,QAAA,EAAC;gBAAiB;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACjFjK,OAAA;kBACEkJ,IAAI,EAAC,KAAK;kBACVV,IAAI,EAAC,eAAe;kBACpBpB,KAAK,EAAE3F,QAAQ,CAACW,aAAc;kBAC9BiJ,QAAQ,EAAE/C,iBAAkB;kBAC5B4B,SAAS,EAAC,oFAAoF;kBAC9FqB,WAAW,EAAC,2BAA2B;kBACvCC,QAAQ;gBAAA;kBAAA1B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACT,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,eAENjK,OAAA;gBAAAmK,QAAA,gBACEnK,OAAA;kBAAOkK,SAAS,EAAC,sCAAsC;kBAAAC,QAAA,EAAC;gBAAuB;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACvFjK,OAAA;kBACEkJ,IAAI,EAAC,QAAQ;kBACbV,IAAI,EAAC,mBAAmB;kBACxBpB,KAAK,EAAE3F,QAAQ,CAACQ,iBAAkB;kBAClCoJ,QAAQ,EAAE/C,iBAAkB;kBAC5BmD,QAAQ;kBACRvB,SAAS,EAAC,+FAA+F;kBACzGsB,QAAQ;gBAAA;kBAAA1B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACT,CAAC,eACFjK,OAAA;kBAAGkK,SAAS,EAAC,4BAA4B;kBAAAC,QAAA,EAAC;gBAE1C;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAG,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACD,CAAC,eAENjK,OAAA;gBAAAmK,QAAA,gBACEnK,OAAA;kBAAOkK,SAAS,EAAC,sCAAsC;kBAAAC,QAAA,EAAC;gBAAW;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC3EjK,OAAA;kBACEkJ,IAAI,EAAC,MAAM;kBACXV,IAAI,EAAC,YAAY;kBACjBpB,KAAK,EAAE3F,QAAQ,CAACI,UAAW;kBAC3BwJ,QAAQ,EAAE/C,iBAAkB;kBAC5BoD,GAAG,EAAE,IAAIjC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACiC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAE;kBAC5CzB,SAAS,EAAC,oFAAoF;kBAC9FsB,QAAQ;gBAAA;kBAAA1B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACT,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,eACNjK,OAAA;gBAAAmK,QAAA,gBACEnK,OAAA;kBAAOkK,SAAS,EAAC,sCAAsC;kBAAAC,QAAA,EAAC;gBAAW;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC3EjK,OAAA;kBACEkJ,IAAI,EAAC,MAAM;kBACXV,IAAI,EAAC,YAAY;kBACjBpB,KAAK,EAAE3F,QAAQ,CAACK,UAAW;kBAC3BuJ,QAAQ,EAAE/C,iBAAkB;kBAC5B4B,SAAS,EAAC,oFAAoF;kBAC9FsB,QAAQ;gBAAA;kBAAA1B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACT,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,EAEL1I,WAAW,KAAK,WAAW,iBAC1BvB,OAAA,CAAAE,SAAA;gBAAAiK,QAAA,gBACEnK,OAAA;kBAAAmK,QAAA,gBACEnK,OAAA;oBAAOkK,SAAS,EAAC,sCAAsC;oBAAAC,QAAA,EAAC;kBAAW;oBAAAL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eAC3EjK,OAAA;oBACEkJ,IAAI,EAAC,MAAM;oBACXV,IAAI,EAAC,YAAY;oBACjBpB,KAAK,EAAE3F,QAAQ,CAACM,UAAW;oBAC3BsJ,QAAQ,EAAE/C,iBAAkB;oBAC5BoD,GAAG,EAAEjK,QAAQ,CAACI,UAAU,IAAI,IAAI4H,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACiC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAE;oBACnEzB,SAAS,EAAC,oFAAoF;oBAC9FsB,QAAQ,EAAEjK,WAAW,KAAK;kBAAY;oBAAAuI,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACvC,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACC,CAAC,eACNjK,OAAA;kBAAAmK,QAAA,gBACEnK,OAAA;oBAAOkK,SAAS,EAAC,sCAAsC;oBAAAC,QAAA,EAAC;kBAAW;oBAAAL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eAC3EjK,OAAA;oBACEkJ,IAAI,EAAC,MAAM;oBACXV,IAAI,EAAC,YAAY;oBACjBpB,KAAK,EAAE3F,QAAQ,CAACO,UAAW;oBAC3BqJ,QAAQ,EAAE/C,iBAAkB;oBAC5B4B,SAAS,EAAC,oFAAoF;oBAC9FsB,QAAQ,EAAEjK,WAAW,KAAK;kBAAY;oBAAAuI,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACvC,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACC,CAAC;cAAA,eACN,CACH,EAEA1I,WAAW,KAAK,YAAY,iBAC3BvB,OAAA;gBAAKkK,SAAS,EAAC,eAAe;gBAAAC,QAAA,gBAC5BnK,OAAA;kBAAOkK,SAAS,EAAC,sCAAsC;kBAAAC,QAAA,EAAC;gBAAa;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC7EjK,OAAA;kBACEwI,IAAI,EAAC,UAAU;kBACfpB,KAAK,EAAE3F,QAAQ,CAACS,QAAS;kBACzBmJ,QAAQ,EAAE/C,iBAAkB;kBAC5B4B,SAAS,EAAC,oFAAoF;kBAC9FsB,QAAQ,EAAEjK,WAAW,KAAK,YAAa;kBAAA4I,QAAA,gBAEvCnK,OAAA;oBAAQoH,KAAK,EAAC,EAAE;oBAAA+C,QAAA,EAAC;kBAAe;oBAAAL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,EACxC9I,gBAAgB,CAACR,GAAG,CAACiL,MAAM,iBAC1B5L,OAAA;oBAAwBoH,KAAK,EAAEwE,MAAM,CAAC/D,EAAG;oBAAAsC,QAAA,GACtCyB,MAAM,CAACpD,IAAI,EAAC,aAAW,EAACoD,MAAM,CAACC,MAAM,IAAI,KAAK,EAAC,QAClD;kBAAA,GAFaD,MAAM,CAAC/D,EAAE;oBAAAiC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAEd,CACT,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACI,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CACN,eAEDjK,OAAA;gBAAKkK,SAAS,EAAC,eAAe;gBAAAC,QAAA,gBAC5BnK,OAAA;kBAAOkK,SAAS,EAAC,sCAAsC;kBAAAC,QAAA,EAAC;gBAA2B;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC3FjK,OAAA;kBACEwI,IAAI,EAAC,iBAAiB;kBACtBpB,KAAK,EAAE3F,QAAQ,CAACU,eAAgB;kBAChCkJ,QAAQ,EAAE/C,iBAAkB;kBAC5BwD,IAAI,EAAC,GAAG;kBACR5B,SAAS,EAAC,oFAAoF;kBAC9FqB,WAAW,EAAC;gBAAwD;kBAAAzB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC3D,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACT,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eAENjK,OAAA;cAAKkK,SAAS,EAAC,kBAAkB;cAAAC,QAAA,eAC/BnK,OAAA;gBACEkJ,IAAI,EAAC,QAAQ;gBACb6C,QAAQ,EAAE1K,OAAQ;gBAClB6I,SAAS,EAAC,6FAA6F;gBAAAC,QAAA,EAEtG9I,OAAO,GAAG,eAAe,GAAG;cAAoB;gBAAAyI,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC3C;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACF;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC7J,EAAA,CAvpBID,WAAW;EAAA,QACGjB,SAAS,EACHU,OAAO,EACdT,WAAW;AAAA;AAAA6M,EAAA,GAHxB7L,WAAW;AAypBjB,eAAeA,WAAW;AAAC,IAAA6L,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}