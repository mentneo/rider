{"ast":null,"code":"var _jsxFileName = \"/Users/yeduruabhiram/Desktop/chiru babai/src/components/LiveLocation/LiveLocationTracker.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { doc, updateDoc, onSnapshot } from 'firebase/firestore';\nimport { db } from '../../firebase/config';\nimport { toast } from 'react-toastify';\nimport { loadGoogleMapsApi, GOOGLE_MAPS_API_KEY } from '../../utils/googleMapsConfig';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LiveLocationTracker = ({\n  bookingId,\n  role,\n  otherPartyId\n}) => {\n  _s();\n  const [myLocation, setMyLocation] = useState(null);\n  const [otherPartyLocation, setOtherPartyLocation] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [sharingEnabled, setSharingEnabled] = useState(true);\n  const [mapLoaded, setMapLoaded] = useState(false);\n  const mapRef = useRef(null);\n  const watchPositionId = useRef(null);\n  const locationUpdateInterval = useRef(null);\n  const myMarkerRef = useRef(null);\n  const otherMarkerRef = useRef(null);\n  useEffect(() => {\n    // Load Google Maps API properly with the utility function\n    let mapScriptLoaded = false;\n    loadGoogleMapsApi(() => {\n      mapScriptLoaded = true;\n      setMapLoaded(true);\n    });\n\n    // Listen for booking updates\n    const bookingRef = doc(db, 'bookings', bookingId);\n    const unsubscribe = onSnapshot(bookingRef, docSnapshot => {\n      if (docSnapshot.exists()) {\n        const bookingData = docSnapshot.data();\n\n        // Check if location sharing is still enabled\n        if (bookingData.liveLocationSharing === false) {\n          setSharingEnabled(false);\n          stopLocationSharing();\n        } else {\n          setSharingEnabled(true);\n        }\n\n        // Get the other party's location\n        if (role === 'driver') {\n          setOtherPartyLocation(bookingData.customerLocation);\n        } else {\n          setOtherPartyLocation(bookingData.driverLocation);\n        }\n      }\n    });\n    return () => {\n      unsubscribe();\n      stopLocationSharing();\n\n      // No need to remove the script as it's needed globally\n    };\n  }, [bookingId, role]);\n  useEffect(() => {\n    if (mapLoaded && mapRef.current) {\n      initializeMap();\n    }\n  }, [mapLoaded]);\n  useEffect(() => {\n    if (mapLoaded && sharingEnabled) {\n      startLocationSharing();\n    } else {\n      stopLocationSharing();\n    }\n    return () => {\n      stopLocationSharing();\n    };\n  }, [mapLoaded, sharingEnabled]);\n  useEffect(() => {\n    if (mapLoaded && myLocation) {\n      updateMyLocationOnMap();\n    }\n  }, [myLocation, mapLoaded]);\n  useEffect(() => {\n    if (mapLoaded && otherPartyLocation) {\n      updateOtherPartyLocationOnMap();\n    }\n  }, [otherPartyLocation, mapLoaded]);\n  const initializeMap = () => {\n    const defaultLocation = {\n      lat: 37.7749,\n      lng: -122.4194\n    }; // Default to San Francisco\n\n    const mapInstance = new window.google.maps.Map(mapRef.current, {\n      center: defaultLocation,\n      zoom: 14,\n      mapTypeControl: false,\n      streetViewControl: false,\n      fullscreenControl: true\n    });\n    window.map = mapInstance; // For debugging\n  };\n  const startLocationSharing = () => {\n    if (!navigator.geolocation) {\n      setError('Geolocation is not supported by your browser');\n      return;\n    }\n    setLoading(true);\n    try {\n      // Get initial location\n      navigator.geolocation.getCurrentPosition(position => {\n        const {\n          latitude,\n          longitude\n        } = position.coords;\n        const locationData = {\n          lat: latitude,\n          lng: longitude,\n          timestamp: new Date().toISOString()\n        };\n        setMyLocation(locationData);\n        updateLocationInFirestore(locationData);\n        setLoading(false);\n\n        // Start watching position\n        watchPositionId.current = navigator.geolocation.watchPosition(position => {\n          const {\n            latitude,\n            longitude\n          } = position.coords;\n          const locationData = {\n            lat: latitude,\n            lng: longitude,\n            timestamp: new Date().toISOString()\n          };\n          setMyLocation(locationData);\n        }, error => {\n          console.error('Geolocation error:', error);\n          setError('Unable to get your current location');\n          setLoading(false);\n        }, {\n          enableHighAccuracy: true,\n          maximumAge: 10000,\n          timeout: 10000\n        });\n\n        // Set up interval to update Firestore (to avoid too many writes)\n        locationUpdateInterval.current = setInterval(() => {\n          if (myLocation) {\n            updateLocationInFirestore(myLocation);\n          }\n        }, 10000); // Update every 10 seconds\n      }, error => {\n        console.error('Geolocation error:', error);\n        setError('Unable to get your current location');\n        setLoading(false);\n        toast.error('Location sharing failed. Please enable location services.');\n      }, {\n        enableHighAccuracy: true,\n        maximumAge: 10000,\n        timeout: 10000\n      });\n    } catch (error) {\n      console.error('Error starting location sharing:', error);\n      setError('Failed to start location sharing');\n      setLoading(false);\n    }\n  };\n  const stopLocationSharing = () => {\n    // Clear the watch position\n    if (watchPositionId.current) {\n      navigator.geolocation.clearWatch(watchPositionId.current);\n      watchPositionId.current = null;\n    }\n\n    // Clear the interval\n    if (locationUpdateInterval.current) {\n      clearInterval(locationUpdateInterval.current);\n      locationUpdateInterval.current = null;\n    }\n  };\n  const updateLocationInFirestore = async locationData => {\n    try {\n      const bookingRef = doc(db, 'bookings', bookingId);\n      if (role === 'driver') {\n        await updateDoc(bookingRef, {\n          driverLocation: locationData\n        });\n      } else {\n        await updateDoc(bookingRef, {\n          customerLocation: locationData\n        });\n      }\n    } catch (error) {\n      console.error('Error updating location in Firestore:', error);\n    }\n  };\n  const updateMyLocationOnMap = () => {\n    if (!window.map || !myLocation) return;\n    const position = new window.google.maps.LatLng(myLocation.lat, myLocation.lng);\n\n    // Update or create marker\n    if (myMarkerRef.current) {\n      myMarkerRef.current.setPosition(position);\n    } else {\n      myMarkerRef.current = new window.google.maps.Marker({\n        position,\n        map: window.map,\n        title: 'My Location',\n        icon: {\n          url: role === 'driver' ? 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png' : 'http://maps.google.com/mapfiles/ms/icons/green-dot.png'\n        }\n      });\n    }\n\n    // Center map if no other location\n    if (!otherPartyLocation) {\n      window.map.setCenter(position);\n    }\n  };\n  const updateOtherPartyLocationOnMap = () => {\n    if (!window.map || !otherPartyLocation) return;\n    const position = new window.google.maps.LatLng(otherPartyLocation.lat, otherPartyLocation.lng);\n\n    // Update or create marker\n    if (otherMarkerRef.current) {\n      otherMarkerRef.current.setPosition(position);\n    } else {\n      otherMarkerRef.current = new window.google.maps.Marker({\n        position,\n        map: window.map,\n        title: role === 'driver' ? 'Customer Location' : 'Driver Location',\n        icon: {\n          url: role === 'driver' ? 'http://maps.google.com/mapfiles/ms/icons/green-dot.png' : 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png'\n        }\n      });\n    }\n\n    // If we have both locations, fit bounds to show both\n    if (myLocation) {\n      const bounds = new window.google.maps.LatLngBounds();\n      bounds.extend(new window.google.maps.LatLng(myLocation.lat, myLocation.lng));\n      bounds.extend(position);\n      window.map.fitBounds(bounds);\n    }\n  };\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-red-50 p-4 rounded-md mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-700\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startLocationSharing,\n        className: \"mt-2 text-sm text-red-700 hover:text-red-900 underline\",\n        children: \"Try again\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mb-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold\",\n        children: \"Live Location Tracking\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `w-3 h-3 rounded-full ${sharingEnabled ? 'bg-green-500' : 'bg-red-500'} mr-2`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm text-gray-600\",\n          children: sharingEnabled ? 'Sharing enabled' : 'Sharing disabled'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapRef,\n      className: \"w-full h-64 rounded-lg border border-gray-300 mb-2\",\n      children: loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-full flex items-center justify-center bg-gray-100\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Initializing location tracking...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-start text-xs text-gray-500\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center mr-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-3 h-3 rounded-full bg-green-500 mr-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Customer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-3 h-3 rounded-full bg-blue-500 mr-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Driver\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 263,\n    columnNumber: 5\n  }, this);\n};\n_s(LiveLocationTracker, \"lEHY/iXhVVyP2ALzkTnMctCqfGI=\");\n_c = LiveLocationTracker;\nexport default LiveLocationTracker;\nvar _c;\n$RefreshReg$(_c, \"LiveLocationTracker\");","map":{"version":3,"names":["React","useState","useEffect","useRef","doc","updateDoc","onSnapshot","db","toast","loadGoogleMapsApi","GOOGLE_MAPS_API_KEY","jsxDEV","_jsxDEV","LiveLocationTracker","bookingId","role","otherPartyId","_s","myLocation","setMyLocation","otherPartyLocation","setOtherPartyLocation","loading","setLoading","error","setError","sharingEnabled","setSharingEnabled","mapLoaded","setMapLoaded","mapRef","watchPositionId","locationUpdateInterval","myMarkerRef","otherMarkerRef","mapScriptLoaded","bookingRef","unsubscribe","docSnapshot","exists","bookingData","data","liveLocationSharing","stopLocationSharing","customerLocation","driverLocation","current","initializeMap","startLocationSharing","updateMyLocationOnMap","updateOtherPartyLocationOnMap","defaultLocation","lat","lng","mapInstance","window","google","maps","Map","center","zoom","mapTypeControl","streetViewControl","fullscreenControl","map","navigator","geolocation","getCurrentPosition","position","latitude","longitude","coords","locationData","timestamp","Date","toISOString","updateLocationInFirestore","watchPosition","console","enableHighAccuracy","maximumAge","timeout","setInterval","clearWatch","clearInterval","LatLng","setPosition","Marker","title","icon","url","setCenter","bounds","LatLngBounds","extend","fitBounds","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","_c","$RefreshReg$"],"sources":["/Users/yeduruabhiram/Desktop/chiru babai/src/components/LiveLocation/LiveLocationTracker.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { doc, updateDoc, onSnapshot } from 'firebase/firestore';\nimport { db } from '../../firebase/config';\nimport { toast } from 'react-toastify';\nimport { loadGoogleMapsApi, GOOGLE_MAPS_API_KEY } from '../../utils/googleMapsConfig';\n\nconst LiveLocationTracker = ({ bookingId, role, otherPartyId }) => {\n  const [myLocation, setMyLocation] = useState(null);\n  const [otherPartyLocation, setOtherPartyLocation] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [sharingEnabled, setSharingEnabled] = useState(true);\n  const [mapLoaded, setMapLoaded] = useState(false);\n  const mapRef = useRef(null);\n  const watchPositionId = useRef(null);\n  const locationUpdateInterval = useRef(null);\n  const myMarkerRef = useRef(null);\n  const otherMarkerRef = useRef(null);\n\n  useEffect(() => {\n    // Load Google Maps API properly with the utility function\n    let mapScriptLoaded = false;\n    loadGoogleMapsApi(() => {\n      mapScriptLoaded = true;\n      setMapLoaded(true);\n    });\n    \n    // Listen for booking updates\n    const bookingRef = doc(db, 'bookings', bookingId);\n    const unsubscribe = onSnapshot(bookingRef, (docSnapshot) => {\n      if (docSnapshot.exists()) {\n        const bookingData = docSnapshot.data();\n        \n        // Check if location sharing is still enabled\n        if (bookingData.liveLocationSharing === false) {\n          setSharingEnabled(false);\n          stopLocationSharing();\n        } else {\n          setSharingEnabled(true);\n        }\n        \n        // Get the other party's location\n        if (role === 'driver') {\n          setOtherPartyLocation(bookingData.customerLocation);\n        } else {\n          setOtherPartyLocation(bookingData.driverLocation);\n        }\n      }\n    });\n    \n    return () => {\n      unsubscribe();\n      stopLocationSharing();\n      \n      // No need to remove the script as it's needed globally\n    };\n  }, [bookingId, role]);\n\n  useEffect(() => {\n    if (mapLoaded && mapRef.current) {\n      initializeMap();\n    }\n  }, [mapLoaded]);\n\n  useEffect(() => {\n    if (mapLoaded && sharingEnabled) {\n      startLocationSharing();\n    } else {\n      stopLocationSharing();\n    }\n    \n    return () => {\n      stopLocationSharing();\n    };\n  }, [mapLoaded, sharingEnabled]);\n  \n  useEffect(() => {\n    if (mapLoaded && myLocation) {\n      updateMyLocationOnMap();\n    }\n  }, [myLocation, mapLoaded]);\n  \n  useEffect(() => {\n    if (mapLoaded && otherPartyLocation) {\n      updateOtherPartyLocationOnMap();\n    }\n  }, [otherPartyLocation, mapLoaded]);\n\n  const initializeMap = () => {\n    const defaultLocation = { lat: 37.7749, lng: -122.4194 }; // Default to San Francisco\n    \n    const mapInstance = new window.google.maps.Map(mapRef.current, {\n      center: defaultLocation,\n      zoom: 14,\n      mapTypeControl: false,\n      streetViewControl: false,\n      fullscreenControl: true,\n    });\n    \n    window.map = mapInstance; // For debugging\n  };\n\n  const startLocationSharing = () => {\n    if (!navigator.geolocation) {\n      setError('Geolocation is not supported by your browser');\n      return;\n    }\n    \n    setLoading(true);\n    \n    try {\n      // Get initial location\n      navigator.geolocation.getCurrentPosition(\n        position => {\n          const { latitude, longitude } = position.coords;\n          const locationData = { lat: latitude, lng: longitude, timestamp: new Date().toISOString() };\n          \n          setMyLocation(locationData);\n          updateLocationInFirestore(locationData);\n          setLoading(false);\n          \n          // Start watching position\n          watchPositionId.current = navigator.geolocation.watchPosition(\n            position => {\n              const { latitude, longitude } = position.coords;\n              const locationData = { lat: latitude, lng: longitude, timestamp: new Date().toISOString() };\n              setMyLocation(locationData);\n            },\n            error => {\n              console.error('Geolocation error:', error);\n              setError('Unable to get your current location');\n              setLoading(false);\n            },\n            { enableHighAccuracy: true, maximumAge: 10000, timeout: 10000 }\n          );\n          \n          // Set up interval to update Firestore (to avoid too many writes)\n          locationUpdateInterval.current = setInterval(() => {\n            if (myLocation) {\n              updateLocationInFirestore(myLocation);\n            }\n          }, 10000); // Update every 10 seconds\n        },\n        error => {\n          console.error('Geolocation error:', error);\n          setError('Unable to get your current location');\n          setLoading(false);\n          toast.error('Location sharing failed. Please enable location services.');\n        },\n        { enableHighAccuracy: true, maximumAge: 10000, timeout: 10000 }\n      );\n    } catch (error) {\n      console.error('Error starting location sharing:', error);\n      setError('Failed to start location sharing');\n      setLoading(false);\n    }\n  };\n\n  const stopLocationSharing = () => {\n    // Clear the watch position\n    if (watchPositionId.current) {\n      navigator.geolocation.clearWatch(watchPositionId.current);\n      watchPositionId.current = null;\n    }\n    \n    // Clear the interval\n    if (locationUpdateInterval.current) {\n      clearInterval(locationUpdateInterval.current);\n      locationUpdateInterval.current = null;\n    }\n  };\n\n  const updateLocationInFirestore = async (locationData) => {\n    try {\n      const bookingRef = doc(db, 'bookings', bookingId);\n      \n      if (role === 'driver') {\n        await updateDoc(bookingRef, {\n          driverLocation: locationData\n        });\n      } else {\n        await updateDoc(bookingRef, {\n          customerLocation: locationData\n        });\n      }\n    } catch (error) {\n      console.error('Error updating location in Firestore:', error);\n    }\n  };\n\n  const updateMyLocationOnMap = () => {\n    if (!window.map || !myLocation) return;\n    \n    const position = new window.google.maps.LatLng(myLocation.lat, myLocation.lng);\n    \n    // Update or create marker\n    if (myMarkerRef.current) {\n      myMarkerRef.current.setPosition(position);\n    } else {\n      myMarkerRef.current = new window.google.maps.Marker({\n        position,\n        map: window.map,\n        title: 'My Location',\n        icon: {\n          url: role === 'driver' \n            ? 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png'\n            : 'http://maps.google.com/mapfiles/ms/icons/green-dot.png'\n        }\n      });\n    }\n    \n    // Center map if no other location\n    if (!otherPartyLocation) {\n      window.map.setCenter(position);\n    }\n  };\n\n  const updateOtherPartyLocationOnMap = () => {\n    if (!window.map || !otherPartyLocation) return;\n    \n    const position = new window.google.maps.LatLng(otherPartyLocation.lat, otherPartyLocation.lng);\n    \n    // Update or create marker\n    if (otherMarkerRef.current) {\n      otherMarkerRef.current.setPosition(position);\n    } else {\n      otherMarkerRef.current = new window.google.maps.Marker({\n        position,\n        map: window.map,\n        title: role === 'driver' ? 'Customer Location' : 'Driver Location',\n        icon: {\n          url: role === 'driver' \n            ? 'http://maps.google.com/mapfiles/ms/icons/green-dot.png'\n            : 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png'\n        }\n      });\n    }\n    \n    // If we have both locations, fit bounds to show both\n    if (myLocation) {\n      const bounds = new window.google.maps.LatLngBounds();\n      bounds.extend(new window.google.maps.LatLng(myLocation.lat, myLocation.lng));\n      bounds.extend(position);\n      window.map.fitBounds(bounds);\n    }\n  };\n\n  if (error) {\n    return (\n      <div className=\"bg-red-50 p-4 rounded-md mb-4\">\n        <p className=\"text-red-700\">{error}</p>\n        <button \n          onClick={startLocationSharing}\n          className=\"mt-2 text-sm text-red-700 hover:text-red-900 underline\"\n        >\n          Try again\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"mb-4\">\n      <div className=\"flex justify-between items-center mb-2\">\n        <h3 className=\"text-lg font-semibold\">Live Location Tracking</h3>\n        <div className=\"flex items-center\">\n          <div className={`w-3 h-3 rounded-full ${sharingEnabled ? 'bg-green-500' : 'bg-red-500'} mr-2`}></div>\n          <span className=\"text-sm text-gray-600\">\n            {sharingEnabled ? 'Sharing enabled' : 'Sharing disabled'}\n          </span>\n        </div>\n      </div>\n      \n      <div \n        ref={mapRef} \n        className=\"w-full h-64 rounded-lg border border-gray-300 mb-2\"\n      >\n        {loading && (\n          <div className=\"h-full flex items-center justify-center bg-gray-100\">\n            <p>Initializing location tracking...</p>\n          </div>\n        )}\n      </div>\n      \n      <div className=\"flex items-start text-xs text-gray-500\">\n        <div className=\"flex items-center mr-4\">\n          <div className=\"w-3 h-3 rounded-full bg-green-500 mr-1\"></div>\n          <span>Customer</span>\n        </div>\n        <div className=\"flex items-center\">\n          <div className=\"w-3 h-3 rounded-full bg-blue-500 mr-1\"></div>\n          <span>Driver</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LiveLocationTracker;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}